# Telegram-бот Face_Detection

Это Telegram-бот, который обнаруживает лица на изображениях с использованием OpenCV и бэкенд API, построенного на FastAPI. Бот позволяет пользователям отправлять изображения и получать координаты обнаруженных лиц прямо в Telegram.

## Как это работает

1.  Пользователь отправляет изображение Telegram-боту.
2.  Бот пересылает изображение бэкенд API.
3.  Бэкенд API использует OpenCV для обнаружения лиц на изображении.
4.  Бэкенд API сохраняет координаты обнаруженных лиц в базе данных PostgreSQL.
5.  Бот получает координаты обнаруженных лиц от бэкенд API.
6.  Бот отправляет сообщение пользователю с координатами обнаруженных лиц.

## Основные технологии

*   **Telegram Bot API:** Позволяет боту взаимодействовать с пользователями Telegram.
*   **python-telegram-bot:** Python-библиотека для взаимодействия с Telegram Bot API.
*   **FastAPI (опционально):** Современный, высокопроизводительный веб-фреймворк для создания бэкенд API на Python (используется для обработки и хранения данных).
*   **OpenCV:** Библиотека компьютерного зрения для обнаружения лиц.
*   **PostgreSQL (опционально):** Реляционная база данных для хранения информации о лицах.
*   **psycopg2 (опционально):** Python-адаптер для работы с PostgreSQL.

## Установка

1.  **Клонируйте репозиторий:** (Если вы используете FastAPI бэкенд)

    ```bash
    git clone Project_python
    ```

2.  **Создайте виртуальное окружение:** (Если вы используете FastAPI бэкенд)

    ```bash
    python -m venv venv
    ```

3.  **Активируйте виртуальное окружение:** (Если вы используете FastAPI бэкенд)

    *   Windows:

        ```bash
        venv\Scripts\activate
        ```

    *   macOS/Linux:

        ```bash
        source venv/bin/activate
        ```

4.  **Установите зависимости:** (Если вы используете FastAPI бэкенд)

    ```bash
    pip install -r requirements.txt
    ```

5.  **Установите библиотеку `python-telegram-bot`:**

    ```bash
    pip install python-telegram-bot
    ```

6.  **Получите API-токен Telegram-бота:**
    Если у вас есть доступ к нему, то токен в ЛС был отправлен. 

## Запуск бота

1.  Замените `YOUR_BOT_TOKEN` на ваш фактический API-токен.
2.  Запустите бота:

    ```bash
    python telegram_bot.py
    ```
    
## Конфигурация 

Если вы используете FastAPI бэкенд для обработки изображений и хранения данных:

**Настройте PostgreSQL:**

    *   Установите PostgreSQL.
    *   Создайте базу данных с именем `face_detection_db`.
    *   Создайте пользователя для доступа к базе данных (например, `postgres`) и назначьте ему пароль.
    *   Создайте таблицу с именем `faces` со следующей схемой:

    ```sql
    CREATE TABLE faces (
        id SERIAL PRIMARY KEY,
        image_name VARCHAR(255) NOT NULL,
        x INTEGER NOT NULL,
        y INTEGER NOT NULL,
        width INTEGER NOT NULL,
        height INTEGER NOT NULL
    );
    ```

**Обновите функцию `detect_faces` в `telegram_bot.py`, чтобы отправлять изображения на эндпоинт FastAPI (если бэкенд используется).**  Вам потребуется использовать библиотеку, такую как `requests`, для выполнения HTTP-запроса. Функция должна затем проанализировать JSON-ответ (с координатами лиц) и использовать их для рисования прямоугольников на изображении.  Затем отправьте обработанное изображение обратно пользователю.

**Настройте параметры подключения к базе данных в вашем FastAPI бэкенде (`main.py`).** 

## Команды бота

*   `/start`: Отображает приветственное сообщение и описание бота.
*   Отправьте изображение: Бот обнаружит лица на изображении и вернет изображение с лицами, отмеченными зелеными прямоугольниками.